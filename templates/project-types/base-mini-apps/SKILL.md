# Base Mini Apps Builder Skill

## Overview
This skill enables the creation and deployment of Base Mini Apps - lightweight applications that run within the Base App ecosystem. Base Mini Apps are built on the Farcaster protocol and integrate seamlessly with Base Account for onchain interactions.

## Capabilities
- Generate complete Base Mini App project structure
- Configure Farcaster manifest and account association
- Set up Base Account integration
- Create embed metadata for social sharing
- Generate app icons, screenshots, and splash screens
- Configure webhook endpoints for notifications
- Implement responsive mobile-first designs
- Set up deployment pipeline for Vercel/production

## Technologies
- **Frontend**: React 18, TypeScript, Vite
- **SDK**: @farcaster/miniapp-sdk
- **Styling**: Tailwind CSS
- **Blockchain**: Base Chain (L2)
- **Protocol**: Farcaster
- **Deployment**: Vercel, Netlify, or custom hosting

## Project Structure

```
base-mini-app/
├── src/
│   ├── components/          # React components
│   │   ├── App.tsx         # Main app component
│   │   ├── MiniAppWrapper.tsx  # SDK wrapper
│   │   └── ui/             # UI components
│   ├── hooks/              # Custom React hooks
│   │   ├── useMiniApp.ts   # MiniApp SDK hook
│   │   └── useBaseAccount.ts # Base Account hook
│   ├── lib/                # Utilities
│   │   ├── sdk.ts          # SDK initialization
│   │   └── utils.ts        # Helper functions
│   ├── pages/              # Application pages
│   ├── styles/             # Global styles
│   └── main.tsx            # Entry point
├── public/
│   ├── .well-known/
│   │   └── farcaster.json  # Manifest file
│   └── images/             # Icons, screenshots, splash
├── api/                    # Webhook handlers (optional)
│   └── webhook.ts
├── index.html              # HTML template with metadata
├── vite.config.ts          # Vite configuration
├── tailwind.config.js      # Tailwind configuration
└── package.json
```

## Manifest Configuration

The `.well-known/farcaster.json` file is the heart of a Base Mini App. It contains:

### Required Fields
- `miniapp.version`: Manifest version (use "1")
- `miniapp.name`: App name displayed in Base App
- `miniapp.homeUrl`: Primary URL of your app
- `miniapp.iconUrl`: App icon (512x512 PNG)
- `miniapp.splashImageUrl`: Splash screen image
- `miniapp.splashBackgroundColor`: Splash screen background color
- `miniapp.subtitle`: Short tagline
- `miniapp.description`: Detailed description
- `miniapp.screenshotUrls`: Array of 3-5 screenshot URLs
- `miniapp.primaryCategory`: Main category (social, gaming, defi, etc.)
- `miniapp.tags`: Array of descriptive tags
- `baseBuilder.ownerAddress`: Base Account address

### Optional Fields
- `miniapp.webhookUrl`: Endpoint for notifications
- `miniapp.heroImageUrl`: Hero image for app page
- `miniapp.tagline`: Short promotional text
- `miniapp.ogTitle`: Open Graph title
- `miniapp.ogDescription`: Open Graph description
- `miniapp.ogImageUrl`: Open Graph image
- `miniapp.noindex`: Prevent search indexing (default: false)

### Account Association
The `accountAssociation` section verifies app ownership:
```json
{
  "accountAssociation": {
    "header": "...",     // Generated by Base Build
    "payload": "...",    // Generated by Base Build
    "signature": "..."   // Generated by Base Build
  }
}
```

Generate these fields using the [Base Build Account Association Tool](https://build.base.org/account-association).

## SDK Integration

### Basic Setup

```typescript
// src/lib/sdk.ts
import { sdk } from '@farcaster/miniapp-sdk';

export const initializeMiniApp = async () => {
  // Wait for app to be ready
  await sdk.actions.ready();

  // Get context
  const context = await sdk.context;

  return { sdk, context };
};
```

### React Hook

```typescript
// src/hooks/useMiniApp.ts
import { useEffect, useState } from 'react';
import { sdk } from '@farcaster/miniapp-sdk';

export const useMiniApp = () => {
  const [context, setContext] = useState<any>(null);
  const [isReady, setIsReady] = useState(false);

  useEffect(() => {
    const init = async () => {
      try {
        // Signal app is ready
        await sdk.actions.ready();

        // Get Farcaster context
        const ctx = await sdk.context;
        setContext(ctx);
        setIsReady(true);
      } catch (error) {
        console.error('Failed to initialize MiniApp:', error);
      }
    };

    init();
  }, []);

  return { context, isReady, sdk };
};
```

### App Component

```typescript
// src/components/App.tsx
import { useMiniApp } from '@/hooks/useMiniApp';

export function App() {
  const { context, isReady } = useMiniApp();

  if (!isReady) {
    return <div>Loading...</div>;
  }

  return (
    <div className="min-h-screen bg-gray-50">
      <h1>Welcome, {context?.user?.displayName}!</h1>
      {/* Your app content */}
    </div>
  );
}
```

## Embed Metadata

Add to `index.html` for rich previews when shared:

```html
<meta name="fc:miniapp" content='{
  "version": "next",
  "imageUrl": "https://your-app.com/embed-image.png",
  "button": {
    "title": "Launch App",
    "action": {
      "type": "launch_miniapp",
      "name": "Your App Name",
      "url": "https://your-app.com"
    }
  }
}' />
```

## Categories

Available primary categories:
- `social`: Social networking and communication
- `gaming`: Games and entertainment
- `defi`: DeFi and financial services
- `nft`: NFT marketplaces and tools
- `productivity`: Productivity and tools
- `education`: Educational content
- `media`: Media and content creation
- `lifestyle`: Lifestyle and personal apps

## Base Account Integration

```typescript
// src/hooks/useBaseAccount.ts
import { useEffect, useState } from 'react';
import { sdk } from '@farcaster/miniapp-sdk';

export const useBaseAccount = () => {
  const [account, setAccount] = useState<string | null>(null);

  useEffect(() => {
    const getAccount = async () => {
      try {
        const context = await sdk.context;
        setAccount(context?.user?.baseAccount);
      } catch (error) {
        console.error('Failed to get Base Account:', error);
      }
    };

    getAccount();
  }, []);

  return { account };
};
```

## Notifications

If you've configured a `webhookUrl`, you can receive notifications:

```typescript
// api/webhook.ts
export async function POST(req: Request) {
  const payload = await req.json();

  // Verify webhook signature
  // Process notification

  return new Response('OK', { status: 200 });
}
```

## Deployment Checklist

1. **Update manifest** at `.well-known/farcaster.json`
2. **Generate account association** using Base Build
3. **Add embed metadata** to `index.html`
4. **Create assets**:
   - Icon: 512x512 PNG
   - Splash: 1170x2532 PNG (recommended)
   - Screenshots: 3-5 images
   - Hero/OG image: 1200x630 PNG
5. **Deploy to production** (Vercel recommended)
6. **Verify deployment** at your domain
7. **Test with Base Build Preview** tool
8. **Publish**: Create a post in Base App with your URL

## Best Practices

### Performance
- Keep bundle size under 500KB
- Optimize images (use WebP)
- Lazy load non-critical components
- Use React.memo for expensive components

### Mobile First
- Design for mobile screens (375px-428px width)
- Use responsive breakpoints
- Test on actual mobile devices
- Optimize touch targets (min 44px)

### User Experience
- Call `sdk.actions.ready()` ASAP to hide splash
- Provide loading states
- Handle errors gracefully
- Support offline functionality when possible

### Security
- Validate all user inputs
- Verify webhook signatures
- Use HTTPS only
- Don't store sensitive data client-side

## Example Manifest

```json
{
  "accountAssociation": {
    "header": "eyJmaWQiOjkxNTIsInR5...",
    "payload": "eyJkb21haW4iOiJhcHAu...",
    "signature": "MHgwMDAwMDAwMDAwMD..."
  },
  "baseBuilder": {
    "ownerAddress": "0x1234567890123456789012345678901234567890"
  },
  "miniapp": {
    "version": "1",
    "name": "My Base Mini App",
    "homeUrl": "https://myapp.com",
    "iconUrl": "https://myapp.com/icon.png",
    "splashImageUrl": "https://myapp.com/splash.png",
    "splashBackgroundColor": "#0052FF",
    "webhookUrl": "https://myapp.com/api/webhook",
    "subtitle": "Fast, fun, and social",
    "description": "A fast and fun way to interact with friends on Base",
    "screenshotUrls": [
      "https://myapp.com/screenshot1.png",
      "https://myapp.com/screenshot2.png",
      "https://myapp.com/screenshot3.png"
    ],
    "primaryCategory": "social",
    "tags": ["social", "gaming", "base"],
    "heroImageUrl": "https://myapp.com/hero.png",
    "tagline": "Connect and play",
    "ogTitle": "My Base Mini App",
    "ogDescription": "A fast and fun way to interact with friends",
    "ogImageUrl": "https://myapp.com/og.png",
    "noindex": false
  }
}
```

## Resources

- [Base Mini Apps Documentation](https://docs.base.org/mini-apps)
- [Farcaster MiniApp SDK](https://github.com/farcasterxyz/miniapp-sdk)
- [Base Build Tools](https://build.base.org)
- [Base Chain Documentation](https://docs.base.org)
- [Design Resources](https://docs.base.org/mini-apps/design-resources)

## Common Issues

### App not loading
- Verify manifest is accessible at `/.well-known/farcaster.json`
- Check that `sdk.actions.ready()` is called after app loads
- Verify all required manifest fields are present

### Account association failed
- Ensure manifest is deployed and accessible
- Use the correct Base Account address
- Regenerate credentials if domain changes

### Embeds not showing
- Verify `fc:miniapp` meta tag in `index.html`
- Check image URLs are publicly accessible
- Test with Base Build Preview tool

## Support

For questions and support:
- [Base Discord](https://discord.gg/base)
- [Farcaster Discord](https://discord.gg/farcaster)
- [Base Documentation](https://docs.base.org)
